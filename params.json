{"name":"DoorPy","tagline":"A Python doorbell application for the Raspberry Pi","body":"### Welcome the DoorPy project webpage.\r\nMy goal of this project was to create a doorbell system using Python (DoorPy) which would alert me when someone is at my door. In addition, I would like to notify people waiting at the door. As I live in an apartment, people (especially delivery guys) would leave in a moment even before I could get to my door. My hopes are that a little screen would keep them mesmerised for long enough, so I can go downstairs. Or simply deny them with a message that I am not around.\r\n\r\nThis project is a work in progress, below is indicated how far I currently am:\r\n- [x] Connect button to GPIO pins RPi.\r\n- [x] Write initial script.\r\n- [X] Attach Display-O-Tron 3000 (Dot3K).\r\n- [X] Expand script to output on Dot3K.\r\n- [X] Adding something smart to notify me!\r\n- [ ] Add networking capabilities between two RPis.\r\n- [ ] Round up.\r\n\r\nI am not at all a developer, I just like Python and use this project as something to learn from. Especially GPIO got my interest (physical computing, yay :sparkles:), as I have never worked with electronics in combination with a Raspberry Pi this seemed like a nice learning experience. I have programmed before, but like I said, not on an epic scale. If you have any comments/advice/questions, just let me know.\r\n\r\n### Prerequisites\r\nWhat you will need for this project:\r\n\r\n1. Raspberry Pi (2 if you want to interact with your doorPy [future work])\r\n2. Wireless doorbell (can be found really cheap, I have bought a 'AC Mini wireless door chime QH-832AC')\r\n3. Display-o-Tron 3000 (@[Pimoroni](http://shop.pimoroni.com/products/displayotron-3000))\r\n4. (Optionally) Pibow case to neatly fit your Pi in.\r\n5. (Optionally) Pibow Display-O-Tron case top\r\n  * To also have your joystick free (harhar).\r\n\r\n### Connecting to a Raspberry's GPIO pins\r\nWel *that* was easy... Connect the button to the pins, import the Python library and off you go!\r\n\r\nOkay, hold you horses *before* you fry your Raspberry! Let us get some things straight:\r\n* GPIO?\r\n* RPi pin map\r\n* Connecting\r\n* Using the GPIO library\r\n\r\n### Write initial script.\r\nThe initial script turned out to be extremely easy. Also GPIO is easy once you read a bit into it.\r\nIt boils down to knowing your pin layout ('pinout') and having some basic knowledge of electronics.\r\n\r\nFor the RPi2 the pinout is easily found online and looks like this:\r\n![RPi2 Pinout - By Element14](http://www.element14.com/community/servlet/JiveServlet/previewBody/73950-102-4-309126/GPIO_Pi2.png)\r\nA more interactive and really useful website with more information on the pins is [Pinout.xyz](http://pinout.xyz), make sure to check their site out as it is really useful. <br/>\r\n__DISCLAIMER: Please triple-check you pinout before connecting anything. Read on, understand the different state a pin can have, and also note that there is a different pinout for the RPi1 and RPi2!<br/>continue reading...__\r\n\r\nThe initial script ended up being something similar to this:\r\n```\r\n#!/usr/bin/python\r\nimport RPi.GPIO as GPIO\r\nimport time, os, sys \r\n\r\n# Set GPIO\r\ngpio_bell = 21 #Doorbell button GPIO name (NOT pin#)\r\nGPIO.setmode(GPIO.BCM)\r\nGPIO.setup(gpio_bell, GPIO.IN , pull_up_down=GPIO.PUD_DOWN)\r\n\r\n# Set an even detection on the channel to detect voltage/button presses\r\nGPIO.add_event_detect(gpio_bell,GPIO.FALLING)\r\n\r\n# Loop code, on detect do something\r\ntry:\r\n    while True:\r\n        if GPIO.input(gpio_bell):\r\n            print \"Danger, danger... High voltage!\"\r\n            time.sleep(10) # Add\r\n        else:\r\n            pass # No input on GPIO pin, so pass \r\n\r\nexcept KeyboardInterrupt:\r\n    print \"Keyboard interrupt (ctrl+c)\"\r\n\r\nexcept Exception as e:\r\n    print \"Exception caught, terminating. Reason:\"\r\n    print str(e)\r\n    \r\nfinally:\r\n    # Reset GPIO pin states \r\n    GPIO.cleanup()\r\n```\r\n\r\nA few things might be new if you are -like me- are just starting out with GPIO on the RPi, but it is actually pretty easy. \r\nThis Python script is rather simple, it does something with GPIO pins and the keeps running until it detects 'high voltage' on the GPIO ping. Sleeps for a bit and then loops again, until interrupted. But let me elaborate on a few things:\r\n```\r\n...\r\nimport RPi.GPIO as GPIO\r\n...\r\n# Set GPIO\r\nGPIO.setmode(GPIO.BCM)\r\ngpio_bell = 21 #Doorbell button GPIO name (NOT pin#)\r\nGPIO.setup(gpio_bell, GPIO.IN , pull_up_down=GPIO.PUD_DOWN)\r\n...\r\n```\r\nFirst you will need to import all GPIO functions, luckily these are included on any Raspbian image. If not you can get the package from [here](http://pypi.python.org/pypi/RPi.GPIO).\r\n\r\nThen you set the mode to 'GPIO.BCM', which means that you are referring to the pins by the \"BroadCoM\" number. This is the number you see defined in `gpio_bell = 21`-part, which is the name for the pin you find on the [PinoutXYZ website](pinout.xyz). This allows us to  define GPIO pins by their number instead of their pin number (but you can change this if you would like otherwise, of course).\r\n\r\n`GPIO.setup(gpio_bell, GPIO.IN , pull_up_down=GPIO.PUD_DOWN)` defines the BCM21-pin we just defined to become a so called 'pull-down'-pin. Each pin can be configured as either a 'pull-up' or 'pull-down' pin. What this boils down to an internal resitor being created to measure the state of the port. The difference between the up or down setting are simply said the following:\r\n* Pull-up: Always has some current flowing through it ad has three states: ON, OFF and FLOATING.\r\n* Pull-down: Is connect to ground internally and has two states: ON and OFF (high/low).\r\nTherefore it makes sense to pick 'Pull-down' for this setup, as we only want to know if someone rings the doorbell. And we are certainly not interested in a floating state, where you cannot do much about with logically, as it is no boolean value.\r\n\r\n```\r\n...\r\n# Set an even detection on the channel to detect voltage/button presses\r\nGPIO.add_event_detect(gpio_bell,GPIO.FALLING)\r\n...\r\n```\r\nSimply set the GPIO pin to detect changes, where `FALLING` means that is detected when a button is pressed (i.e. current is going through the pin to ground).\r\n\r\n```\r\n...\r\n# Loop code, on detect do something\r\ntry:\r\n    while True:\r\n        if GPIO.input(gpio_bell):\r\n            print \"Danger, danger... High voltage!\"\r\n            time.sleep(10) # Add\r\n        else:\r\n            pass # No input on GPIO pin, so pass \r\n...\r\n```\r\nKeep looping the code `pass`, until you measure a 'pull-down' on GPIO BCM21-pin.\r\n\r\nSee, GPIO is pretty simple! A few lines of code and __BOOM__ you are tinkering with electronics connect you your Raspberry Pi!\r\n\r\n### Attach Display-O-Tron 3000 (Dot3K).\r\nBacon ipsum dolor amet rump pork chop short loin brisket spare ribs sausage ham. Doner biltong shank leberkas, tenderloin strip steak sausage frankfurter flank pastrami pork loin tongue picanha. Filet mignon pork belly pig turkey turducken doner rump drumstick picanha shoulder meatball pork leberkas. Filet mignon leberkas porchetta beef ribs. Short loin frankfurter t-bone pork belly bacon beef beef ribs boudin tenderloin meatball chicken rump ham.\r\n\r\nShankle shoulder ham pork chop, ham hock venison porchetta. Short ribs biltong kielbasa, hamburger shankle tri-tip salami sirloin beef turkey kevin. Tongue flank bacon, drumstick sirloin doner pork loin hamburger kevin porchetta bresaola chicken spare ribs kielbasa ground round. Shank ham hock flank short ribs doner. Prosciutto venison pork, alcatra cupim tri-tip bresaola. Cow ham beef swine pork loin, jerky pork chop biltong strip steak andouille jowl.\r\n\r\n### Expand script to output on Dot3K.\r\nBacon ipsum dolor amet rump pork chop short loin brisket spare ribs sausage ham. Doner biltong shank leberkas, tenderloin strip steak sausage frankfurter flank pastrami pork loin tongue picanha. Filet mignon pork belly pig turkey turducken doner rump drumstick picanha shoulder meatball pork leberkas. Filet mignon leberkas porchetta beef ribs. Short loin frankfurter t-bone pork belly bacon beef beef ribs boudin tenderloin meatball chicken rump ham.\r\n\r\nShankle shoulder ham pork chop, ham hock venison porchetta. Short ribs biltong kielbasa, hamburger shankle tri-tip salami sirloin beef turkey kevin. Tongue flank bacon, drumstick sirloin doner pork loin hamburger kevin porchetta bresaola chicken spare ribs kielbasa ground round. Shank ham hock flank short ribs doner. Prosciutto venison pork, alcatra cupim tri-tip bresaola. Cow ham beef swine pork loin, jerky pork chop biltong strip steak andouille jowl.\r\n\r\n### Something smart to notify me.\r\nBacon ipsum dolor amet rump pork chop short loin brisket spare ribs sausage ham. Doner biltong shank leberkas, tenderloin strip steak sausage frankfurter flank pastrami pork loin tongue picanha. Filet mignon pork belly pig turkey turducken doner rump drumstick picanha shoulder meatball pork leberkas. Filet mignon leberkas porchetta beef ribs. Short loin frankfurter t-bone pork belly bacon beef beef ribs boudin tenderloin meatball chicken rump ham.\r\n\r\nShankle shoulder ham pork chop, ham hock venison porchetta. Short ribs biltong kielbasa, hamburger shankle tri-tip salami sirloin beef turkey kevin. Tongue flank bacon, drumstick sirloin doner pork loin hamburger kevin porchetta bresaola chicken spare ribs kielbasa ground round. Shank ham hock flank short ribs doner. Prosciutto venison pork, alcatra cupim tri-tip bresaola. Cow ham beef swine pork loin, jerky pork chop biltong strip steak andouille jowl.\r\n\r\n### Add networking capabilities between two RPis.\r\nBacon ipsum dolor amet rump pork chop short loin brisket spare ribs sausage ham. Doner biltong shank leberkas, tenderloin strip steak sausage frankfurter flank pastrami pork loin tongue picanha. Filet mignon pork belly pig turkey turducken doner rump drumstick picanha shoulder meatball pork leberkas. Filet mignon leberkas porchetta beef ribs. Short loin frankfurter t-bone pork belly bacon beef beef ribs boudin tenderloin meatball chicken rump ham.\r\n\r\nShankle shoulder ham pork chop, ham hock venison porchetta. Short ribs biltong kielbasa, hamburger shankle tri-tip salami sirloin beef turkey kevin. Tongue flank bacon, drumstick sirloin doner pork loin hamburger kevin porchetta bresaola chicken spare ribs kielbasa ground round. Shank ham hock flank short ribs doner. Prosciutto venison pork, alcatra cupim tri-tip bresaola. Cow ham beef swine pork loin, jerky pork chop biltong strip steak andouille jowl.\r\n\r\n### Round up.\r\nBacon ipsum dolor amet rump pork chop short loin brisket spare ribs sausage ham. Doner biltong shank leberkas, tenderloin strip steak sausage frankfurter flank pastrami pork loin tongue picanha. Filet mignon pork belly pig turkey turducken doner rump drumstick picanha shoulder meatball pork leberkas. Filet mignon leberkas porchetta beef ribs. Short loin frankfurter t-bone pork belly bacon beef beef ribs boudin tenderloin meatball chicken rump ham.\r\n\r\nShankle shoulder ham pork chop, ham hock venison porchetta. Short ribs biltong kielbasa, hamburger shankle tri-tip salami sirloin beef turkey kevin. Tongue flank bacon, drumstick sirloin doner pork loin hamburger kevin porchetta bresaola chicken spare ribs kielbasa ground round. Shank ham hock flank short ribs doner. Prosciutto venison pork, alcatra cupim tri-tip bresaola. Cow ham beef swine pork loin, jerky pork chop biltong strip steak andouille jowl.\r\n\r\n### Future wishes\r\nOf course, there is more to make/hack/break than this! I still have some wishes for my beloved DoorPy:\r\n* Camera feed\r\n* Web-interface backend\r\n\r\n### Contact & References\r\nCredits where credits are due:\r\n* [PiMoRoNi](http://shop.pimoroni.com) - An awesome shop for all your Raspberry Pi needs! I got my cables, case (Pibow :heart:), Display-O-Tron 3000 and some miscellaneous stuff from them. *Note:* Ever wondered where their name comes from? Pirate-Monkey-Robot-Ninja. Yes, [really](http://shop.pimoroni.com/pages/frequently-asked-questions)!","google":"UA-66078376-1","note":"Don't delete this file! It's used internally to help with page regeneration."}